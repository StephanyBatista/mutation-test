"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var fs = require("mz/fs");
var nodeGlob = require("glob");
var mkdirp = require("mkdirp");
var rimraf = require("rimraf");
function glob(expression) {
    return new Promise(function (resolve, reject) {
        nodeGlob(expression, { nodir: true }, function (error, matches) { error ? reject(error) : resolve(matches); });
    });
}
exports.glob = glob;
function deleteDir(dirToDelete) {
    return new Promise(function (resolve, reject) {
        rimraf(dirToDelete, function (error) { error ? reject(error) : resolve(); });
    });
}
exports.deleteDir = deleteDir;
function cleanFolder(folderName) {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var e_1;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    _a.trys.push([0, 3, , 4]);
                    return [4 /*yield*/, fs.lstat(folderName)];
                case 1:
                    _a.sent();
                    return [4 /*yield*/, deleteDir(folderName)];
                case 2:
                    _a.sent();
                    return [2 /*return*/, mkdirp.sync(folderName)];
                case 3:
                    e_1 = _a.sent();
                    return [2 /*return*/, mkdirp.sync(folderName)];
                case 4: return [2 /*return*/];
            }
        });
    });
}
exports.cleanFolder = cleanFolder;
/**
 * Wrapper around the 'require' function (for testability)
 */
function importModule(moduleName) {
    require(moduleName);
}
exports.importModule = importModule;
function isOnlineFile(path) {
    return path.indexOf('http://') === 0 || path.indexOf('https://') === 0;
}
exports.isOnlineFile = isOnlineFile;
//# sourceMappingURL=fileUtils.js.map